<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Salary Form - Form 16 Generator</title>
<style>
  body{font-family:Arial,sans-serif;background:#f8f9fa;margin:0}
  .container{max-width:640px;margin:40px auto;background:#fff;padding:24px 28px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
  h2{text-align:center;margin:0 0 16px}
  label{display:block;margin-top:12px;font-weight:bold}
  input,select{width:100%;padding:8px;margin-top:6px;border:1px solid #ccc;border-radius:6px;font-size:14px}
  input:invalid{border-color:red}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  button{margin-top:20px;padding:10px 18px;border:none;border-radius:6px;font-size:16px;cursor:pointer;background:#3498db;color:#fff;width:100%}
  button:hover{background:#2980b9}
</style>
</head>
<body>
  <div class="container">
    <h2>Form 16 Generator (FY 2025-26)</h2>

    <form id="salaryForm" method="post" action="/calculate_salary" novalidate>
      <label for="name">Name</label>
      <input id="name" name="name" type="text" required>

      <div class="row">
        <div>
          <label for="kgid">KGID No</label>
          <input id="kgid" name="kgid" type="text">
        </div>
        <div>
          <label for="pan">PAN</label>
          <input id="pan" name="pan" type="text" required
                 pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}"
                 title="PAN must be 10 chars: 5 caps letters, 4 digits, 1 cap letter (e.g., ABCDE1234F)">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="designation">Designation</label>
          <input id="designation" name="designation" type="text">
        </div>
        <div>
          <label for="group">Group of Employee</label>
          <input id="group" name="group" type="text">
        </div>
      </div>

      <label for="basic_salary">Basic Salary (Monthly)</label>
      <input id="basic_salary" name="basic_salary" type="number" min="0" required>

      <div class="row">
        <div>
          <label for="increment_month">Annual Increment Month</label>
          <select id="increment_month" name="increment_month" required>
            <option value="1">January</option><option value="2">February</option>
            <option value="3">March</option><option value="4">April</option>
            <option value="5">May</option><option value="6">June</option>
            <option value="7">July</option><option value="8">August</option>
            <option value="9">September</option><option value="10">October</option>
            <option value="11">November</option><option value="12">December</option>
          </select>
        </div>
        <div>
          <label for="timebound_increment">Time-bound Increment (apply in Dec)</label>
          <input id="timebound_increment" name="timebound_increment" type="number" min="0" value="0">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="city_grade">City Grade (for HRA)</label>
          <select id="city_grade" name="city_grade" required>
            <option value="A">Grade A (Metro)</option>
            <option value="B">Grade B</option>
            <option value="C" selected>Grade C / Others</option>
          </select>
        </div>
        <div>
          <label for="allowance">Other Allowance (Annual)</label>
          <input id="allowance" name="allowance" type="number" min="0" value="0">
        </div>
      </div>

      <!-- EL Encashment is NOT input; it will be computed from December salary -->
      <button type="submit">Generate Report</button>
    </form>
  </div>

<script>
  // extra client-side checks
  document.getElementById("salaryForm").addEventListener("submit", function (e) {
    const pan = document.getElementById("pan").value.trim();
    const panRe = /^[A-Z]{5}[0-9]{4}[A-Z]$/;
    if (!panRe.test(pan)) {
      alert("Invalid PAN format. Example: ABCDE1234F");
      e.preventDefault(); return false;
    }
    for (const id of ["basic_salary","timebound_increment","allowance"]) {
      const el = document.getElementById(id);
      if (el.value === "" || Number(el.value) < 0) {
        alert("Please enter valid non-negative numbers."); e.preventDefault(); return false;
      }
    }
  });
</script>
</body>
</html>
